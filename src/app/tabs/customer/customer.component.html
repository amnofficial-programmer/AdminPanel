<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header card-header-danger">
            <div class="row">
              <div class="col-md-6">
                <h4 class="card-title ">CUSTOMER</h4>
                <!-- <p class="card-category">Here is a subtitle for this table</p> -->
              </div>
              <div class="col-md-6">
                <div class="pull-right matbtnGroup">

                  <button mat-raised-button type="submit" data-target="#largeModalAddCustomer" data-toggle="modal"
                    data-backdrop="static" data-keyboard="false">Add</button>
                   
                    <!-- <img style="cursor: pointer;margin-right: 10px;" src='../../../assets/img/icons/addUser.jpg' title="Add Customer" width="24" data-target="#largeModalAddCustomer" data-toggle="modal"
                    data-backdrop="static" data-keyboard="false"/> -->
                    <button mat-raised-button type="submit" data-target="#largeModalAgentAssign" data-toggle="modal"
                    data-backdrop="static" data-keyboard="false">Agent Assign</button>
                  <!-- <button mat-raised-button type="submit" (click)="ExportExcel()">Export To Excel</button>
                  <button mat-raised-button type="submit" (click)="ExportPdf()">Export To Pdf</button> -->

                  <img style="cursor: pointer;margin-right: 10px;" src='../../../assets/img/icons/xls.png' title="Export Excel" (click)="ExportExcel()" width="24"/>
                  <img style="cursor: pointer;margin-right: 10px;"src='../../../assets/img/icons/pdf.png' title="Export PDF"  (click)="ExportPdf()" width="24"/>

                </div>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div  class="table-responsive">
              <table id="customerdataTable" class="display"
                style=" border-collapse:collapse; table-layout:fixed; width:100%;">
                <thead>
                  <tr>
                    <th hidden>Id</th>
                    <th width="5%"></th>
                    <th width="8%">Sr No</th>
                    <th width="12%">Name Of Applicant</th>
                    <th width="10%">Agent Name</th>
                    <!-- <th width="35%">Current Address</th> -->
                    <!-- <th width="35%">Name Of Business</th> -->
                    <th width="10%">Mobile No</th>
                    <th width="15%">Loan Amount(₹)</th>
                    <th width="10%">Due Amount(₹)</th>
                    <th width="10%">EMI Amount(₹)</th>
                    <th width="10%">EMI</th>
                    <th width="10%">Actions</th>
                  </tr>
                </thead>

                <tbody>
                  <tr *ngFor="let data of customerGrid; let i=index">
                    <td hidden data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)">
                      {{data.customerId}}
                    </td>
                    <ng-container *ngIf="data.agent == null;else elseagentDto2">
                      <td><input type="checkbox" (change)=" onSelection(data, $event)" [checked]="data.checkProp"></td>
                    </ng-container>
                    <ng-template #elseagentDto2>
                      <td><input type="checkbox" (change)=" onSelection(data, $event)" checked disabled></td>
                    </ng-template>
                    <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)">
                      {{i+1}}
                    </td>

                    <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                      <span style="color:rgb(0, 71, 204);font-weight: bold;"> {{data.nameOfApplicant}}</span>
                    </td>

                    <ng-container *ngIf="data.agent == null;else elseagentDto">
                      <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)">
                      -
                    </td>
                    </ng-container>
                    <ng-template #elseagentDto>
                      <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)">
                      {{data.agent.name}}
                    </td>
                    </ng-template>
                    <!-- <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                      {{data.currentAddress}}
                    </td> -->
                    <!-- <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                      {{data.nameOfBusiness}}
                    </td> -->

                    <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)">
                      {{data.mobileNo}}
                    </td>
                    <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                      {{data.loanAmount}}
                    </td>
                    <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                      data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                      {{data.openingDueAmount}}
                    </td>
                    <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                    data-keyboard="false" (click)="ViewDataBind(data)">
                    {{data.repaymentAmount}}
                  </td>
                  <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                  data-keyboard="false" (click)="ViewDataBind(data)">
                  <ng-container *ngIf="data.repayment === 'daily';else elserepayment">
                  <span style="color:rgb(0, 71, 204);">{{data.repayment}}</span>  
                  </ng-container>
                  <ng-template #elserepayment>
                    {{data.repayment}}
                  </ng-template>
                </td>
                    <td>
                      <span style="color:rgb(0, 71, 204);font-weight: bold;">
                        <ng-container *ngIf="data.agent == null;else elseagentDto3">
                        
                        </ng-container>
                        <ng-template #elseagentDto3>
                          <i class="material-icons" title="Reassign Agent To Customer" data-target="#largeModalAgentAssign" data-toggle="modal"
                          data-backdrop="static" data-keyboard="false" (click)="ReassignAgent(data)">group_add</i>&nbsp;&nbsp;
                        </ng-template>
                        <i class="material-icons" title="Update Customer" data-target="#largeModalUpdateCustomer" data-toggle="modal"
                      data-backdrop="static" data-keyboard="false" (click)="UpdateDataBind(data)">create</i>&nbsp;&nbsp;
                    <i class="material-icons" title="Delete Customer" data-target="#largeModalDeleteCustomer" data-toggle="modal"
                      data-backdrop="static" data-keyboard="false" (click)="DeleteDataBind(data)">delete_forever</i></span>
                     
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>


            <div class="panel-body">
              <!-- <div class="row">
                <div class="col-md-3">
                    <div class="list-group border-bottom">
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'json',escape:'false'});"><img src='img/icons/json.png' width="24"/> JSON</a>
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'json',escape:'false',ignoreColumn:'[2,3]'});"><img src='img/icons/json.png' width="24"/> JSON (ignoreColumn)</a>
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'json',escape:'true'});"><img src='img/icons/json.png' width="24"/> JSON (with Escape)</a>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="list-group border-bottom">
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'xml',escape:'false'});"><img src='img/icons/xml.png' width="24"/> XML</a>
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'sql'});"><img src='img/icons/sql.png' width="24"/> SQL</a>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="list-group border-bottom">
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'csv',escape:'false'});"><img src='img/icons/csv.png' width="24"/> CSV</a>
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'txt',escape:'false'});"><img src='img/icons/txt.png' width="24"/> TXT</a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="list-group border-bottom">
                        <button ><img src='img/icons/xls.png' width="24"/> XLS</button>
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'doc',escape:'false'});"><img src='img/icons/word.png' width="24"/> Word</a>
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'powerpoint',escape:'false'});"><img src='img/icons/ppt.png' width="24"/> PowerPoint</a>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="list-group border-bottom">
                        <a  class="list-group-item" onClick ="$('#customers').tableExport({type:'png',escape:'false'});"><img src='img/icons/png.png' width="24"/> PNG</a>
                        <button onClick ="$('#customers').tableExport({type:'pdf',escape:'false'});"><img src='img/icons/pdf.png' width="24"/> PDF</button>
                    </div>
                </div>
            </div>   -->
              <!-- <div class=" row form-group">
                <div class="col-md-1"><b>Show Item</b></div>
                <div class="col-md-1">
                    <select class="form-control select"  [(ngModel)]="itemsPerPage" (change)="itemsPerPageChange($event)">
                        <option>10</option>
                        <option>25</option>
                        <option>50</option>
                        <option>100</option>
                        <option>1000</option>
                    </select>
                </div> 
                <div class="col-md-5"></div>
                <div class="col-md-1">Search</div>
                <div class="col-md-3">
                  <input  class="form-control" type="text" placeholder="Enter Contact No. or Name" (keyup)="searchevent($event)" [(ngModel)]="search">
                </div>
                <div class="col-md-1">
                  <ul class="panel-controls">
                    <li><a (click)="searchJobseeker(search)"><span class="fa fa-search"></span></a></li>
                  </ul>
            </div>
            </div>
              <table id="customers" class="table datatable table-responsive" style=" border-collapse:collapse; table-layout:fixed; width:100%;">
                <thead >
                  <tr>
                    <th></th>
                    <th width="10%">Sr No</th>
                    <th width="10%">Name Of Applicant</th>
                    <th width="10%">Agent Name</th>
                    <th width="35%">Current Address</th>
                    <th width="35%">Name Of Business</th>
                    <th width="10%">Mobile No</th>
                    <th width="15%">Loan Amount(₹)</th>
                    <th width="10%">Due Amount(₹)</th>
                    <th width="15%">EMI Amount(₹)</th>
                    <th width="10%">EMI</th>
                    <th width="10%">Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr   *ngFor="let data of customerList | paginate: { id: 'customerPagination',
                  itemsPerPage: itemsPerPage, currentPage: pageNo, totalItems: customerListLength}; let i = index">
                  
          
                    <ng-container *ngIf="data.agent == null;else elseagentDto">
                      <td><input type="checkbox" (change)=" onSelection(data, $event)" [checked]="data.checkProp"></td>
                    </ng-container>
                    <ng-template #elseagentDto>
                      <td><input type="checkbox" (change)=" onSelection(data, $event)" checked disabled></td>
                    </ng-template>
                  
                  <td >{{((pageNo)*itemsPerPage-itemsPerPage)+(i+1)}}</td>
                  <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                  data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                  <span style="color:rgb(0, 71, 204);font-weight: bold;">{{data.nameOfApplicant}}</span>   
                </td>
                <ng-container *ngIf="data.agent == null;else elseagentDto1">
                  <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                  data-keyboard="false" (click)="ViewDataBind(data)">
                  -
                </td>
                </ng-container>
                <ng-template #elseagentDto1>
                  <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                  data-keyboard="false" (click)="ViewDataBind(data)">
                  {{data.agent.name}}
                </td>
                </ng-template>
                <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                  data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                  {{data.currentAddress}}
                </td>
                <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                  data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                  {{data.nameOfBusiness}}
                </td>

                <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                  data-keyboard="false" (click)="ViewDataBind(data)">
                  {{data.mobileNo}}
                </td>
                <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                  data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                  {{data.loanAmount}}
                </td>
                <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
                data-keyboard="false" (click)="ViewDataBind(data)" style="word-wrap:break-word;">
                {{data.openingDueAmount}}
              </td>
              <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
              data-keyboard="false" (click)="ViewDataBind(data)">
              {{data.repaymentAmount}}
            </td>
            <td data-target="#CustomerViewModal" data-toggle="modal" data-backdrop="static"
            data-keyboard="false" (click)="ViewDataBind(data)">
            <ng-container *ngIf="data.repayment === 'daily';else elserepayment">
              <span style="color:rgb(0, 71, 204);">{{data.repayment}}</span>  
              </ng-container>
              <ng-template #elserepayment>
                {{data.repayment}}
              </ng-template>
          </td>
                <td>
                  <span style="color:rgb(0, 71, 204);font-weight: bold;"> <i class="material-icons" data-target="#largeModalUpdateCustomer" data-toggle="modal"
                    data-backdrop="static" data-keyboard="false" (click)="UpdateDataBind(data)">create</i>
                  <i class="material-icons" data-target="#largeModalDeleteCustomer" data-toggle="modal"
                    data-backdrop="static" data-keyboard="false" (click)="DeleteDataBind(data)">delete_forever</i></span>
                </td>
                  </tr>
                </tbody>
              </table>
              <pagination-controls id="customerPagination" (pageChange)="pageNoChange($event);pageNo = $event">
              </pagination-controls> -->
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<div class="modal fade" id="largeModalAddCustomer" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="largeModalLabel">ADD CUSTOMER</h5>
        <button type="button" class="close" (click)="addCloseClick()" #closeaddForm data-dismiss="modal"
          aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>


      <form name="form" (ngSubmit)="addForm.form.valid && AddCustomerSubmit()" #addForm="ngForm" novalidate
        (keydown.enter)="$event.preventDefault()">
        <div class="modal-body">
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="nameOfApplicant">Name Of Applicant<sup style="font-size: 80%;color:red">*</sup></label>
                  <input type="text" class="form-control" id="nameOfApplicant" placeholder="Enter nameOfApplicant"
                    name="nameOfApplicant" [(ngModel)]="addCustomer.nameOfApplicant" #nameOfApplicant="ngModel"
                    [ngClass]="{ 'is-invalid': addForm.submitted && nameOfApplicant.invalid }" required>
                  <div *ngIf="addForm.submitted && nameOfApplicant.invalid" class="invalid-feedback">
                    <div *ngIf="nameOfApplicant.errors.required">Name Of Applicant is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="otherName">Other Name</label>
                  <input type="text" class="form-control" id="otherName" placeholder="Enter Other Name" name="otherName"
                    [(ngModel)]="addCustomer.otherName" #otherName="ngModel">
                  <!-- [ngClass]="{ 'is-invalid': addForm.submitted && otherName.invalid }" required -->
                  <div *ngIf="addForm.submitted && otherName.invalid" class="invalid-feedback">
                    <div *ngIf="otherName.errors.required">Other Name is required</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="firmName">Firm Name</label>
                  <input type="text" class="form-control" id="firmName" placeholder="Enter Firm Name" name="firmName"
                    [(ngModel)]="addCustomer.firmName" #firmName="ngModel">
                  <!-- [ngClass]="{ 'is-invalid': addForm.submitted && firmName.invalid }" required -->
                  <div *ngIf="addForm.submitted && firmName.invalid" class="invalid-feedback">
                    <div *ngIf="firmName.errors.required">Firm Name is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="mobileNo">Mobile No<sup style="font-size: 80%;color:red">*</sup></label>
                  <input type="text" class="form-control" id="mobileNo" placeholder="Enter mobileNo" name="mobileNo"
                    [(ngModel)]="addCustomer.mobileNo" #mobileNo="ngModel" maxlength="10"
                    (keypress)="_keyPress1($event)" [ngClass]="{ 'is-invalid': addForm.submitted && mobileNo.invalid }"
                    required>
                  <div *ngIf="addForm.submitted && mobileNo.invalid" class="invalid-feedback">
                    <div *ngIf="mobileNo.errors.required">Mobile No is required</div>
                  </div>

                 

                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="currentAddress">Current Address</label>
                  <textarea rows="4" type="text" class="form-control" id="currentAddress"
                    placeholder="Enter Current Address" name="currentAddress" [(ngModel)]="addCustomer.currentAddress"
                    #currentAddress="ngModel"></textarea>
                  <!-- [ngClass]="{ 'is-invalid': addForm.submitted && currentAddress.invalid }" required -->
                  <div *ngIf="addForm.submitted && currentAddress.invalid" class="invalid-feedback">
                    <div *ngIf="currentAddress.errors.required">Current Address is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="residentialAddress">Residential Address</label>
                  <textarea rows="4" type="text" class="form-control" id="residentialAddress"
                    placeholder="Enter Residential Address" name="residentialAddress"
                    [(ngModel)]="addCustomer.residentialAddress" #residentialAddress="ngModel"></textarea>
                  <!-- [ngClass]="{ 'is-invalid': addForm.submitted && residentialAddress.invalid }" required -->
                  <div *ngIf="addForm.submitted && residentialAddress.invalid" class="invalid-feedback">
                    <div *ngIf="residentialAddress.errors.required">Residential Address is required</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="nameOfBusiness">Name Of Business</label>
                  <input type="text" class="form-control" id="nameOfBusiness" placeholder="Enter Other Name"
                    name="nameOfBusiness" [(ngModel)]="addCustomer.nameOfBusiness" #nameOfBusiness="ngModel">
                  <!-- [ngClass]="{ 'is-invalid': addForm.submitted && nameOfBusiness.invalid }" required -->
                  <div *ngIf="addForm.submitted && nameOfBusiness.invalid" class="invalid-feedback">
                    <div *ngIf="nameOfBusiness.errors.required">Other Name is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="addressOfBusiness">Address Of Business</label>
                  <textarea rows="4" type="text" class="form-control" id="addressOfBusiness"
                    placeholder="Enter Address Of Business" name="addressOfBusiness"
                    [(ngModel)]="addCustomer.addressOfBusiness" #addressOfBusiness="ngModel"></textarea>
                  <!-- [ngClass]="{ 'is-invalid': addForm.submitted && addressOfBusiness.invalid }" required -->
                  <div *ngIf="addForm.submitted && addressOfBusiness.invalid" class="invalid-feedback">
                    <div *ngIf="addressOfBusiness.errors.required">Address Of Business is required</div>
                  </div>
                </div>
              </div>

            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="loanAmount">Loan Amount<sup style="font-size: 80%;color:red">*</sup></label>
                  <input type="number" class="form-control" id="loanAmount" placeholder="Enter Loan Amount"
                    name="loanAmount" [(ngModel)]="addCustomer.loanAmount" #loanAmount="ngModel"
                    [ngClass]="{ 'is-invalid': addForm.submitted && loanAmount.invalid }" required>
                  <!--  -->
                  <div *ngIf="addForm.submitted && loanAmount.invalid" class="invalid-feedback">
                    <div *ngIf="loanAmount.errors.required">Loan Amount is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group" >
                  <label for="repayment">EMI<sup style="font-size: 80%;color:red">*</sup></label>
                  <br>
                  <input type="radio" value="daily" name="repayment" ng-control="repayment"
                    [(ngModel)]="addCustomer.repayment" #repayment="ngModel" 
                    [ngClass]="{ 'is-invalid': addForm.submitted && repayment.invalid }" required>&nbsp; Daily
                  &nbsp;&nbsp;
                  <input type="radio" value="weekly" name="repayment" ng-control="repayment"
                    [(ngModel)]="addCustomer.repayment" #repayment="ngModel" 
                    [ngClass]="{ 'is-invalid': addForm.submitted && repayment.invalid }" required>&nbsp; Weekly
                  <div *ngIf="addForm.submitted && repayment.invalid" class="invalid-feedback">
                    <div *ngIf="repayment.errors.required">Repayment is required</div>
                  </div>

                  

                  <input type="number" class="form-control" id="repaymentAmount" placeholder="Enter EMI Amount"
                  name="repaymentAmount" [(ngModel)]="addCustomer.repaymentAmount" #repaymentAmount="ngModel"
                  [ngClass]="{ 'is-invalid': addForm.submitted && repaymentAmount.invalid }" required>
                <!--  -->
                <div *ngIf="addForm.submitted && repaymentAmount.invalid" class="invalid-feedback">
                  <div *ngIf="repaymentAmount.errors.required">EMI Amount is required</div>
                </div>
                  <!-- <mat-radio-group name="repayment" ng-control="repayment" [(ngModel)]="addCustomer.repayment"
                    #repayment="ngModel" (change)="onchangeofradio($event)"
                    [ngClass]="{ 'is-invalid': addForm.submitted && repayment.invalid }" required>
                    <mat-radio-button value="daily">
                      Daily
                    </mat-radio-button>
                    <mat-radio-button value="weekly">
                      Weekly
                    </mat-radio-button>
                  </mat-radio-group> -->

                </div>
              </div>

            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="openingDueAmount">Opening Due Amount<sup style="font-size: 80%;color:red">*</sup></label>
                  <input type="number" class="form-control" id="openingDueAmount" placeholder="Enter Opening Due Amount"
                    name="openingDueAmount" [(ngModel)]="addCustomer.openingDueAmount" #openingDueAmount="ngModel"
                    (keyup)="keyup($event)"
                    [ngClass]="{ 'is-invalid': addForm.submitted && openingDueAmount.invalid }"  required>
                  <!--  -->
                  <div *ngIf="addForm.submitted && openingDueAmount.invalid" class="invalid-feedback">
                    <div *ngIf="openingDueAmount.errors.required">Opening Due Amount is required</div>
                  </div>
                  <span id="openingDueAmounterr" style="color:red;font-size: 12px"></span>
                </div>
              </div>
              

            </div>
          </div>
        </div>
        <div class="modal-footer matbtnGroup">

          <button mat-raised-button type="submit">Save</button>
          <button mat-raised-button type="submit" (click)="addCancelClick();" data-dismiss="modal">Cancel</button>


        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="largeModalUpdateCustomer" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="largeModalLabel">UPDATE CUSTOMER</h5>
        <button type="button" (click)="updateCloseClick()" #closeupdateForm class="close" data-dismiss="modal"
          aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form name="form" (ngSubmit)="updateForm.form.valid && UpdateCustomerSubmit()" #updateForm="ngForm" novalidate
        (keydown.enter)="$event.preventDefault()">
        <div class="modal-body" *ngIf="customerUpdate">
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="nameOfApplicant">Name Of Applicant<sup style="font-size: 80%;color:red">*</sup></label>
                  <input type="text" class="form-control" id="nameOfApplicant" placeholder="Enter nameOfApplicant"
                    name="nameOfApplicant" [(ngModel)]="customerUpdate.nameOfApplicant" #nameOfApplicant="ngModel"
                    [ngClass]="{ 'is-invalid': updateForm.submitted && nameOfApplicant.invalid }" required>
                  <div *ngIf="updateForm.submitted && nameOfApplicant.invalid" class="invalid-feedback">
                    <div *ngIf="nameOfApplicant.errors.required">Name Of Applicant is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="otherName">Other Name</label>
                  <input type="text" class="form-control" id="otherName" placeholder="Enter Other Name" name="otherName"
                    [(ngModel)]="customerUpdate.otherName" #otherName="ngModel">
                  <!-- [ngClass]="{ 'is-invalid': updateForm.submitted && otherName.invalid }" required -->
                  <div *ngIf="updateForm.submitted && otherName.invalid" class="invalid-feedback">
                    <div *ngIf="otherName.errors.required">Other Name is required</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="firmName">Firm Name</label>
                  <input type="text" class="form-control" id="firmName" placeholder="Enter Firm Name" name="firmName"
                    [(ngModel)]="customerUpdate.firmName" #firmName="ngModel">
                  <!-- [ngClass]="{ 'is-invalid': updateForm.submitted && firmName.invalid }" required -->
                  <div *ngIf="updateForm.submitted && firmName.invalid" class="invalid-feedback">
                    <div *ngIf="firmName.errors.required">Firm Name is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="mobileNo">Mobile No<sup style="font-size: 80%;color:red">*</sup></label>
                  <input type="text" class="form-control" id="mobileNo" placeholder="Enter mobileNo" name="mobileNo"
                    [(ngModel)]="customerUpdate.mobileNo" #mobileNo="ngModel" maxlength="10"
                    (keypress)="_keyPress1($event)"
                    [ngClass]="{ 'is-invalid': updateForm.submitted && mobileNo.invalid }" required>
                  <div *ngIf="updateForm.submitted && mobileNo.invalid" class="invalid-feedback">
                    <div *ngIf="mobileNo.errors.required">Mobile No is required</div>
                  </div>

                  

                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="currentAddress">Current Address</label>
                  <textarea rows="4" type="text" class="form-control" id="currentAddress"
                    placeholder="Enter Current Address" name="currentAddress"
                    [(ngModel)]="customerUpdate.currentAddress" #currentAddress="ngModel"></textarea>
                  <!-- [ngClass]="{ 'is-invalid': updateForm.submitted && currentAddress.invalid }" required -->
                  <div *ngIf="updateForm.submitted && currentAddress.invalid" class="invalid-feedback">
                    <div *ngIf="currentAddress.errors.required">Current Address is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="residentialAddress">Residential Address</label>
                  <textarea rows="4" type="text" class="form-control" id="residentialAddress"
                    placeholder="Enter Residential Address" name="residentialAddress"
                    [(ngModel)]="customerUpdate.residentialAddress" #residentialAddress="ngModel"></textarea>
                  <!-- [ngClass]="{ 'is-invalid': updateForm.submitted && residentialAddress.invalid }" required -->
                  <div *ngIf="updateForm.submitted && residentialAddress.invalid" class="invalid-feedback">
                    <div *ngIf="residentialAddress.errors.required">Residential Address is required</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="nameOfBusiness">Name Of Business</label>
                  <input type="text" class="form-control" id="nameOfBusiness" placeholder="Enter Other Name"
                    name="nameOfBusiness" [(ngModel)]="customerUpdate.nameOfBusiness" #nameOfBusiness="ngModel">
                  <!-- [ngClass]="{ 'is-invalid': updateForm.submitted && nameOfBusiness.invalid }" required -->
                  <div *ngIf="updateForm.submitted && nameOfBusiness.invalid" class="invalid-feedback">
                    <div *ngIf="nameOfBusiness.errors.required">Other Name is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label for="addressOfBusiness">Address Of Business</label>
                  <textarea rows="4" type="text" class="form-control" id="addressOfBusiness"
                    placeholder="Enter Address Of Business" name="addressOfBusiness"
                    [(ngModel)]="customerUpdate.addressOfBusiness" #addressOfBusiness="ngModel"></textarea>
                  <!-- [ngClass]="{ 'is-invalid': updateForm.submitted && addressOfBusiness.invalid }" required -->
                  <div *ngIf="updateForm.submitted && addressOfBusiness.invalid" class="invalid-feedback">
                    <div *ngIf="addressOfBusiness.errors.required">Address Of Business is required</div>
                  </div>
                </div>
              </div>

            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="loanAmount">Loan Amount<sup style="font-size: 80%;color:red">*</sup></label>
                  <input type="number" class="form-control" id="loanAmount" placeholder="Enter Loan Amount"
                    name="loanAmount" [(ngModel)]="customerUpdate.loanAmount" #loanAmount="ngModel"
                    [ngClass]="{ 'is-invalid': updateForm.submitted && loanAmount.invalid }" required>
                  <!--  -->
                  <div *ngIf="updateForm.submitted && loanAmount.invalid" class="invalid-feedback">
                    <div *ngIf="loanAmount.errors.required">Loan Amount is required</div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group" >
                  <label for="repayment">EMI<sup style="font-size: 80%;color:red">*</sup></label>
                  <br>
                  <input type="radio" value="daily" name="repayment" ng-control="repayment"
                    [(ngModel)]="customerUpdate.repayment" #repayment="ngModel"
                  
                    [ngClass]="{ 'is-invalid': updateForm.submitted && repayment.invalid }" required>
                      <!-- (change)="onchangeofradio($event)" -->&nbsp; Daily
                  &nbsp;&nbsp;
                  <input type="radio" value="weekly" name="repayment" ng-control="repayment"
                    [(ngModel)]="customerUpdate.repayment" #repayment="ngModel" 
                    [ngClass]="{ 'is-invalid': updateForm.submitted && repayment.invalid }" required>
                    <!-- (change)="onchangeofradio($event)" -->
                    &nbsp; Weekly
                  <div *ngIf="updateForm.submitted && repayment.invalid" class="invalid-feedback">
                    <div *ngIf="repayment.errors.required">Repayment is required</div>
                  </div>


                  <input type="number" class="form-control" id="repaymentAmount" placeholder="Enter EMI Amount"
                  name="repaymentAmount" [(ngModel)]="customerUpdate.repaymentAmount" #repaymentAmount="ngModel"
                  [ngClass]="{ 'is-invalid': updateForm.submitted && repaymentAmount.invalid }" required>
                <!--  -->
                <div *ngIf="updateForm.submitted && repaymentAmount.invalid" class="invalid-feedback">
                  <div *ngIf="repaymentAmount.errors.required">EMI Amount is required</div>
                </div>
<!-- 
                  <mat-radio-group name="repayment" ng-control="repayment" [(ngModel)]="customerUpdate.repayment"
                    #repayment="ngModel" (change)="onchangeofradio($event)"
                    [ngClass]="{ 'is-invalid': updateForm.submitted && repayment.invalid }" required>
                    <mat-radio-button value="daily">
                      Daily
                    </mat-radio-button>
                    <mat-radio-button value="weekly">
                      Weekly
                    </mat-radio-button>
                  </mat-radio-group> -->

                </div>
              </div>

            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="openingDueAmount">Opening Due Amount<sup style="font-size: 80%;color:red">*</sup></label>
                  <input type="number" class="form-control" id="openingDueAmount" placeholder="Enter Opening Due Amount"
                    name="openingDueAmount" [(ngModel)]="customerUpdate.openingDueAmount" #openingDueAmount="ngModel"
                    [ngClass]="{ 'is-invalid': updateForm.submitted && openingDueAmount.invalid }"  (keyup)="keyupupdate($event)" required>
                  <!--  -->
                  <div *ngIf="updateForm.submitted && openingDueAmount.invalid" class="invalid-feedback">
                    <div *ngIf="openingDueAmount.errors.required">Opening Due Amount is required</div>
                  </div>
                  <span id="openingDueAmounterr" style="color:red;font-size: 12px"></span>
                </div>
              </div>
              

            </div>
          </div>
        </div>
        <div class="modal-footer matbtnGroup">

          <button mat-raised-button type="submit">Update</button>
          <button mat-raised-button type="submit" (click)="updateCancelClick()" data-dismiss="modal">Cancel</button>


        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="largeModalDeleteCustomer" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="largeModalLabel">DELETE CUSTOMER</h5>
        <button type="button" #closedeleteForm class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body" *ngIf="customerDelete">
        <div class="card-body">
          <h5>ARE YOU SURE YOU WANT TO DELETE {{customerDelete.nameOfApplicant}} ?</h5>
        </div>
      </div>
      <div class="modal-footer matbtnGroup">

        <button mat-raised-button type="submit" (click)="DeleteCustomerSubmit()">Delete</button>
        <button mat-raised-button type="submit" data-dismiss="modal">Cancel</button>

      </div>
    </div>
  </div>
</div>




<div class="modal fade" id="largeModalAgentAssign" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="largeModalLabel">ASSIGN AGENT TO CUSTOMER</h5>
        <button type="button" #closeassignForm (click)="deleteAssignList()" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <div class="card-body">
          <ng-container *ngIf="this.filteredAgentsFlag == false;else elselist">
            <select class="form-control select"  [(ngModel)]="agentId" (change)="agentSelection($event)">
              <option value=0 >Select Agent</option>
              <option *ngFor="let agents of agentGrid; let i = index" [value]="agents.agentId" >{{agents.name}}</option>
          </select>
          </ng-container>
          <ng-template #elselist>
            <select class="form-control select"  [(ngModel)]="agentId" (change)="agentSelection($event)">
              <option *ngFor="let agents of filteredAgents; let i = index" [value]="agents.agentId">{{agents.name}}</option>
          </select>
          </ng-template>
          <span id="selecterror" style="color:red;font-size: 12px"></span>
        </div>
      </div>
      <div class="modal-footer matbtnGroup">

        <button mat-raised-button type="submit" (click)="assignSubmit(agentId)">Assign</button>
        <button mat-raised-button type="submit" data-dismiss="modal" (click)="deleteAssignList()" >Cancel</button>

      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="CustomerViewModal" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="largeModalLabel">VIEW CUSTOMER</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body" *ngIf="customerViewData">
        <div class="card-body">
          <div class="table-responsive">
            <table id="example" class="table table-striped table-bordered table-hover table-condensed"
              style="width:100%">
              <tbody>
              
                <tr>
                  <td><b>Name Of Applicant</b></td>
                  <td><span style="color:rgb(0, 71, 204);font-weight: bold;">{{customerViewData.nameOfApplicant}}</span></td>
                </tr>
                <tr>
                  <td><b>Agent Name</b></td>
                  <td>
                    <ng-container *ngIf="customerViewData.agent == null;else elseagentDto1">
                      <td>-</td>
                    </ng-container>
                    <ng-template #elseagentDto1>
                      <td>{{customerViewData.agent.name}}</td>
                    </ng-template>
                  </td>
                </tr>
                <tr>
                  <td><b>Other Name</b></td>
                  <td>{{customerViewData.otherName}}</td>
                </tr>
                <tr>
                  <td><b>Firm Name</b></td>
                  <td>{{customerViewData.firmName}}</td>
                </tr>
                <tr>
                  <td><b>Current Address</b></td>
                  <td>{{customerViewData.currentAddress}}</td>
                </tr>
                <tr>
                  <td><b>Residential Address</b></td>
                  <td>{{customerViewData.residentialAddress}}</td>
                </tr>
                <tr>
                  <td><b>Name Of Business</b></td>
                  <td>{{customerViewData.nameOfBusiness}}</td>
                </tr>
                <tr>
                  <td><b>Address Of Business</b></td>
                  <td>{{customerViewData.addressOfBusiness}}</td>
                </tr>
                <tr>
                  <td><b>Mobile No</b></td>
                  <td>{{customerViewData.mobileNo}}</td>
                </tr>
                <tr>
                  <td><b>Loan Amount</b></td>
                  <td>₹ {{customerViewData.loanAmount}}.00</td>
                </tr>
                <tr>
                  <td><b>Repayment</b></td>
                  <td>
                  <ng-container *ngIf="customerViewData.repayment === 'daily';else elserepayment">
                    <span style="color:rgb(0, 71, 204);">{{customerViewData.repayment}}</span>  
                    </ng-container>
                    <ng-template #elserepayment>
                      {{customerViewData.repayment}}
                    </ng-template>
                  </td>
                </tr>
                <tr>
                  <td><b>Repayment Amount</b></td>
                  <td>₹ {{customerViewData.repaymentAmount}}.00</td>
                </tr>
                <tr>
                  <td><b>Open Due Amount</b></td>
                  <td>₹ {{customerViewData.openingDueAmount}}.00</td>
                </tr>
                
              </tbody>
            </table>
          </div>

        </div>
      </div>
      <div class="modal-footer">

      </div>
    </div>
  </div>
</div>
